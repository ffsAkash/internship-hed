var counter=25;
$(document).ready(function(){set_resend_cta();$("#resend-otp-cta").hide();$(".ic-24-edit-v2").click(function(){$(".verify-box").hide();$(".change-email-box").css({display:"flex"})});$("#otp").on("input",function(){var a=$(this).val();6<=a.length&&(a=a.substring(0,6),$(this).val(a))});$("#email-otp-verify-form").validate({onfocusout:function(a){"checkbox"!==a.type&&this.element(a)},rules:{otp:{required:!0,minlength:6,maxlength:6},user_email:{required:!0,email:!0,maxlength:100}},errorPlacement:function(a,b){a.insertAfter(b)},
highlight:function(a){$(a).closest(".form-group").addClass("has-error");$(a).closest(".form-group").removeClass("has-success");$(a).closest("input").addClass("error");$(a).closest("input").removeClass("valid")},success:function(a){$(a).closest(".form-group").addClass("has-success");$(a).closest(".form-group").removeClass("has-error");$(a).closest("input").addClass("valid");$(a).closest("input").removeClass("error")},submitHandler:function(){var a=$("#email-otp-verify-form").serializeArray();NProgress.start();
$(".loading_image").show();$.ajax("/registration/verify_email_submit",{data:a,success:otp_submit_success,error:onError,type:"post"});return!1}});$("#resend-otp-cta").click(function(){$.ajax("/registration/resend_otp",{success:resend_success,error:onError,type:"get"})});$("#edit-email-form").validate({onfocusout:function(a){"checkbox"!==a.type&&this.element(a)},rules:{email:{required:!0,email:!0,maxlength:100}},errorPlacement:function(a,b){a.insertAfter(b)},highlight:function(a){$(a).closest(".form-group").addClass("has-error");
$(a).closest(".form-group").removeClass("has-success");$(a).closest("input").addClass("error");$(a).closest("input").removeClass("valid")},success:function(a){$(a).closest(".form-group").addClass("has-success");$(a).closest(".form-group").removeClass("has-error");$(a).closest("input").addClass("valid");$(a).closest("input").removeClass("error")},submitHandler:function(){var a=$("#edit-email-form").serializeArray();NProgress.start();$(".loading_image").show();$.ajax("/registration/change_email_submit",
{data:a,success:email_change_success,error:onError,type:"post"});return!1}})});
var otp_submit_success=function(a){try{(NProgress.done(),a.success)?"undefined"!=typeof a.successPage?window.location=a.successPage:"student"===a.user_type?window.location=a.is_from_resume_checker?"/student_resume_parser/auto_populate_resume":"/student/personal_details?referral=dashboard":"employer"===a.user_type&&(window.location="/employer/profile"):"undefined"!==typeof a.errorPage?throw_error(a.errorThrown,a.errorPage):throw_error(a.errorThrown)}catch(b){throw_error(b),NProgress.done()}$(".loading_image").hide()},
email_change_success=function(a){try{NProgress.done(),a.success?location.reload(!0):throw_error(a.errorThrown,a.errorPage)}catch(b){throw_error(b),NProgress.done()}$(".loading_image").hide()},set_resend_cta=function(){setInterval(function(){0===counter?($(".countdown").hide(),$("#resend-otp-cta").show(),clearInterval(set_resend_cta)):($(".countdown").text(`Resend code in ${counter} seconds`),counter--)},1E3)},resend_success=function(a){try{NProgress.done(),a.success?location.reload(!0):throw_error(a.errorThrown)}catch(b){throw_error(b),
NProgress.done()}$(".loading_image").hide()};
